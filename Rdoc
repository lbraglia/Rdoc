#!/usr/bin/Rscript --vanilla --quiet

args <- commandArgs(trailingOnly = TRUE)

usage <- function(){cat('
Usage:

   Rdoc string              - help
   Rdoc -hs string          - help.search
   Rdoc -a string           - apropos
   Rdoc -v [string]         - vignette
   Rdoc -s string           - use sos::findFn

')
}

Rdoc_quit <- function(){
    usage()
    quit(save = 'no', status =1)
}

if(0L == length(args)){
    Rdoc_quit()
}

## --------
## Helpers
## --------

Help <- function(args){
    if(length(args) > 1)
        Rdoc_quit()
    splitted <- strsplit(args, '::')
             
    help(topic = help_topic,
         package = help_package,
         lib.loc = NULL,
         verbose = FALSE,
         try.all.packages = getOption('help.try.all.packages'),
         help_type = getOption('help_type', 'text'))
}




## -----
## Main
## -----

if ('-hs' == args[1]) {
    Help.search(args[-1])
} else if ('-a' == args[1]){
    Apropos(args[-1])
} else if ('-v' == args[1]){
    Vignette(args[-1])
} else if ('-s' == args[1]){
    SOS(args[-1])
} else {
    Help(args[-1])
}
